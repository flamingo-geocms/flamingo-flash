<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Flamingo Demo</title>
    </head>
    <body style="min-height: 600px; min-width: 1000px;">
        <script type="text/javascript" src="scripts/swfobject.js"></script>

        <div id="flashcontent" style="width: 100%; height: 90%">
            <font color="red"><strong>For some reason the Flamingo mapviewer can not be shown. Please contact the website administrator.</strong></font>
        </div>
        <div id="lastRequest">

        </div>
        <a id="configLink" href="" target="_blank">Config file</a>
        <script type="text/javascript" src="scripts/loadConfig.js"></script>
        <script type="text/javascript">
			//capture the onEvent of the jsbutton with the id="b_legend"
			function flamingo_map_layer1_onRequest(layerId, type, obj){
				if (obj.requesttype=='GetMap'){
					document.getElementById('lastRequest').innerHTML=obj.url;
				}
			}

			function flamingo_map_onIdentify(movieId,extent){
				alert(extent.minx+ " "+extent.maxx);
			}

			function flamingo_map_onIdentifyData(mapId,layerId,obj,extent,nrIdentifiedLayers,totalLayers){
				var message="";
				for (layer in obj){
					message+="layer: "+layer+" \n";
					for (feature in obj[layer]){
						for (attribute in obj[layer][feature]){
							message+=attribute+": "+obj[layer][feature][attribute]+"\n";
						}
					}
				}
				alert(message);
			}
        </script>

    </body>
</html>
